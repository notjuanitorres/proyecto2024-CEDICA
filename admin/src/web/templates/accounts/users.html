{% extends "layout.html" %} 

{% from "macros/pagination.html" import render_pagination %}
{% from "macros/date_format.html" import format_date %}

{% block title %}Usuarios{% endblock %} 

{% block head %} 
    {{ super() }} 
{% endblock %} 

{% block content %}
<section class="is-fullheight-with-navbar"">
  <div class="table-container">
    <div class="box">
      <a class="button" href="{{ url_for('users_bp.create_user')}}">Crear usuario</a>
    </div>
    <table class="table is-striped is-scrollable is-fullwidth p-5 mt-5">
      <thead>
        <tr>
          <th>ID</th>
          <th>Email</th>
          <th>Alias</th>
          <th>Esta activo</th>
          <th>Roles</th>
          <th>Ingreso</th>
          <th>Ultima actualizacion</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
        <tr>
          <th>{{ user.id }}</th>
          <th>{{ user.email }}</th>
          <td>{{ user.alias }}</td>
          <td>{{ user.enabled }}</td>
          <td>{{ user.roles }}</td>
          <td>{{ format_date(user.inserted_at) }}</td>
          <td>{{ format_date(user.updated_at) }}</td>
          <td>
            <a href="{{ url_for('users_bp.show_user', user_id=user.id) }}" class="button">Ver</a>
          </td>
        </tr>
        {% endfor %}
        <tr>
          <th>marta@email.com</th>
          <td>MartaMartinez</td>
          <td>Martu</td>
          <td>Si</td>
          <td>Voluntario</td>
          <td>20/09/2023 14:30</td>
          <td>15/05/2024 09:45</td>
          <td><button class="button">Ver</button></td>
        </tr>
      <tfoot>
        <tr>
          <th>ID</th>
          <th>Email</th>
          <th>Alias</th>
          <th>Esta activo</th>
          <th>Roles</th>
          <th>Ingreso</th>
          <th>Ultima actualizacion</th>
          <th></th>
        </tr>
      </tfoot>
    </table>
    <div class="container px-5">{{ render_pagination(users, 'users_bp.get_page') }}</div>
  </div>
</section>
{% endblock %}

